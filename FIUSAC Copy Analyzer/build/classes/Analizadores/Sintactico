package analizadores;
import java_cup.runtime.*;
import java.util.ArrayList;
import Errores.*;

parser code 
{:
    public String Resulto = "";
    private Symbol s;
    public ArrayList<NodoVariable> ListaVariables = new ArrayList();
    public ArrayList<NodoGrafica> GraficasEjecutar = new ArrayList();
    public ArrayList<String> Ejes = new ArrayList();
    public ArrayList<String> Direcciones = new ArrayList();
    public ArrayList<String> valores = new ArrayList();
    public ArrayList<String> ListaTokens = new ArrayList();
    public NodoGrafica graficabarras = new NodoGrafica();
    public NodoGrafica graficapie = new NodoGrafica();
    public NodoGrafica graficalineas = new NodoGrafica();

    public void error_sintax(Symbol s){
        this.s = s;
    }
    
    public Symbol getS(){
        return this.s;
    } 

    public void syntax_error(Symbol s){ 
        System.out.println("Error Sintáctico en la Línea " + (s.left) +
        " Columna "+s.right+ ". No se esperaba este componente: " +s.value+".");
        Errores.Error.ErroresCometidos.add(new Excepciones("Sintactico", "Este es un error sintactico: "+s.value, s.left, s.right));
    } 

    public void unrecovered_syntax_error(Symbol s) throws java.lang.Exception{ 
        System.out.println("Error síntactico irrecuperable en la Línea " + 
        (s.left)+ " Columna "+s.right+". Componente " + s.value + 
        " no reconocido."); 
        Errores.Error.ErroresCometidos.add(new Excepciones("Sintactico", "Este es un error sintactico: "+s.value, s.left, s.right));
    } 
:} 

terminal String BPDEG, BPGRE, BPSTG, BPDOUBLE;
terminal String BPGBARRAS,BPTITULO, BPEJEX;
terminal String BPVALORES, BPTTX, BPTTY, BPGPIE;
terminal String BPGLINEAS,BPARCHIVO;
terminal String BPPTCOMA, BPDOSPUNTOS, BPCOMA;
terminal String BPCORIZQ, BPCORDER, BPLLAIZQ, BPLLADER;
terminal String BPEQUAL;
terminal String IDENTIFICADOR, BPCADENA, DD;
terminal String BPPAA, BPPAC, BPRUTA, BPCOMPARE, BPPUGE, BPPUES;


non terminal ini, contenidogeneral, titulos;
non terminal ArrayList<NodoVariable> cuerpo;
non terminal ArrayList<NodoGrafica> graficas;
non terminal datosgraficabarra, datosgraficapie, datosgraficalineal; 
non terminal titulox, tituloy, Arch;
non terminal ArrayList<String> contenidox, contenidov, ejesx, valores, compara;

start with ini;

ini::=BPGRE:var1 BPLLAIZQ:var2 contenidogeneral BPLLADER:var3 {:ListaTokens.add(var1); ListaTokens.add(var2); ListaTokens.add(var3);:}
    |error BPLLADER;

contenidogeneral::=BPDEG:var1 BPLLAIZQ:var2 cuerpo BPLLADER:var3 graficas {:ListaTokens.add(var1); ListaTokens.add(var2);
                                                                            ListaTokens.add(var3);:}
                  |compara BPDEG:var1 BPLLAIZQ:var2 cuerpo BPLLADER:var3 graficas {:ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                    ListaTokens.add(var3);:}
                  |BPDEG:var1 BPLLAIZQ:var2 cuerpo BPLLADER:var3 compara graficas {:ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                    ListaTokens.add(var3);:}
                  |error BPLLADER;

cuerpo::=BPSTG:var3 IDENTIFICADOR:var1 BPEQUAL:var4 BPCADENA:var2 BPPTCOMA:var5  {:ListaVariables.add(new NodoVariable(var1, var2));
                                                                                   ListaTokens.add(var3); ListaTokens.add(var4);
                                                                                   ListaTokens.add(var5);:}
        |BPDOUBLE:var3 IDENTIFICADOR:var1 BPEQUAL:var4 DD:var2 BPPTCOMA:var5 {:ListaVariables.add(new NodoVariable(var1, var2));
                                                                               ListaTokens.add(var3); ListaTokens.add(var4);
                                                                               ListaTokens.add(var5);:}
        |cuerpo BPSTG:var3 IDENTIFICADOR:var1 BPEQUAL:var4 BPCADENA:var2 BPPTCOMA:var5 {:ListaVariables.add(new NodoVariable(var1, var2));
                                                                         ListaTokens.add(var3); ListaTokens.add(var4);
                                                                         ListaTokens.add(var5);:}
        |cuerpo BPDOUBLE:var3 IDENTIFICADOR:var1 BPEQUAL:var4 DD:var2 BPPTCOMA:var5 {:ListaVariables.add(new NodoVariable(var1, var2));
                                                                                      ListaTokens.add(var3); ListaTokens.add(var4);
                                                                                      ListaTokens.add(var5);:}
        |error BPPTCOMA;

graficas::=BPGBARRAS:var1 BPLLAIZQ:var2 datosgraficabarra BPLLADER:var3 {:graficabarras.tipo=var1;
                                                                          GraficasEjecutar.add(graficabarras);
                                                                          ListaTokens.add(var1); ListaTokens.add(var2);
                                                                          ListaTokens.add(var3);:}

          |BPGBARRAS:var1 BPLLAIZQ:var2 datosgraficabarra BPLLADER:var3 compara {:graficabarras.tipo=var1;
                                                                                GraficasEjecutar.add(graficabarras);
                                                                                ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                ListaTokens.add(var3);:}

            |BPGPIE:var1 BPLLAIZQ:var2 datosgraficapie BPLLADER:var3 {:graficapie.tipo=var1;
                                                                        GraficasEjecutar.add(graficapie);
                                                                        ListaTokens.add(var1); ListaTokens.add(var2);
                                                                         ListaTokens.add(var3);:}

            |BPGPIE:var1 BPLLAIZQ:var2 datosgraficapie BPLLADER:var3 compara {:graficapie.tipo=var1;
                                                                               GraficasEjecutar.add(graficapie);
                                                                               ListaTokens.add(var1); ListaTokens.add(var2);
                                                                               ListaTokens.add(var3);:}

            |BPGLINEAS:var1 BPLLAIZQ:var2 datosgraficalineal BPLLADER:var3 {:graficalineas.tipo=var1;
                                                                            GraficasEjecutar.add(graficalineas);
                                                                            ListaTokens.add(var1); ListaTokens.add(var2);
                                                                            ListaTokens.add(var3);:}

            |BPGLINEAS:var1 BPLLAIZQ:var2 datosgraficalineal BPLLADER:var3 compara{:graficalineas.tipo=var1;
                                                                                    GraficasEjecutar.add(graficalineas);
                                                                                    ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                    ListaTokens.add(var3);:}

            |graficas BPGBARRAS:var1 BPLLAIZQ:var2 datosgraficabarra BPLLADER:var3 compara {:graficabarras.tipo=var1;
                                                                                            GraficasEjecutar.add(graficabarras);
                                                                                            ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                            ListaTokens.add(var3);:}

            |graficas BPGBARRAS:var1 BPLLAIZQ:var2 datosgraficabarra BPLLADER:var3 {:graficabarras.tipo=var1;
                                                                                    GraficasEjecutar.add(graficabarras);
                                                                                    ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                    ListaTokens.add(var3);:}

            |graficas BPGPIE:var1 BPLLAIZQ:var2 datosgraficapie BPLLADER:var3 {:graficapie.tipo=var1;
                                                                                GraficasEjecutar.add(graficapie);
                                                                                ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                ListaTokens.add(var3);:}

            |graficas BPGPIE:var1 BPLLAIZQ:var2 datosgraficapie BPLLADER:var3 compara {:graficapie.tipo=var1;
                                                                                        GraficasEjecutar.add(graficapie);
                                                                                        ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                        ListaTokens.add(var3);:}

            |graficas BPGLINEAS:var1 BPLLAIZQ:var2 datosgraficalineal BPLLADER:var3 {:graficalineas.tipo=var1;
                                                                                    GraficasEjecutar.add(graficalineas);
                                                                                    ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                    ListaTokens.add(var3);:}

            |graficas BPGLINEAS:var1 BPLLAIZQ:var2 datosgraficalineal BPLLADER:var3 compara {:graficalineas.tipo=var1;
                                                                                            GraficasEjecutar.add(graficalineas);
                                                                                            ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                            ListaTokens.add(var3);:}
            |error BPLLADER;

datosgraficabarra::=datosgraficabarra titulos:var1 {:graficabarras.titulo=(String) var1;:}
            |datosgraficabarra ejesx:var1 {:graficabarras.Ejes=var1;:}
            |datosgraficabarra valores:var1 {:graficabarras.Valores=var1;:}
            |datosgraficabarra titulox:var1 {:graficabarras.Titulox=(String) var1;:}
            |datosgraficabarra tituloy:var1 {:graficabarras.Tituloy=(String) var1;:}
            |titulos:var1 {:graficabarras.titulo=(String) var1;:}
            |ejesx:var1 {:graficabarras.Ejes=var1;:}
            |valores:var1 {:graficabarras.Valores=var1;:}
            |titulox:var1 {:graficabarras.Titulox=(String) var1;:}
            |tituloy:var1 {:graficabarras.Tituloy=(String) var1;:}
;

datosgraficapie::=datosgraficapie titulos:var1 {:graficapie.titulo=(String) var1;:}
            |datosgraficapie ejesx:var1 {:graficapie.Ejes=var1;:}
            |datosgraficapie valores:var1 {:graficapie.Valores=var1;:}
            |titulos:var1 {:graficapie.titulo=(String) var1;:}
            |ejesx:var1 {:graficapie.Ejes=var1;:}
            |valores:var1 {:graficapie.Valores=var1;:}
;

datosgraficalineal::=datosgraficalineal titulos:var1 {:graficalineas.titulo=(String) var1;:}
            |datosgraficalineal Arch:var1 {:graficalineas.Titulox=(String) var1;:}
            |titulos:var1 {:graficalineas.titulo=(String) var1;:}
            |Arch:var1 {:graficalineas.Titulox=(String) var1;:}
;

titulos::=BPTITULO:var2 BPDOSPUNTOS:var3 IDENTIFICADOR:var1 BPPTCOMA:var4 {:RESULT=var1; 
                                                                            ListaTokens.add(var2); ListaTokens.add(var3);
                                                                            ListaTokens.add(var4);:}
         |BPTITULO:var2 BPDOSPUNTOS:var3 BPCADENA:var1 BPPTCOMA:var4 {:RESULT=var1;
                                                                      ListaTokens.add(var2); ListaTokens.add(var3);
                                                                      ListaTokens.add(var4);:}
;

ejesx::=BPEJEX:var1 BPDOSPUNTOS:var2 BPCORIZQ:var3 contenidox BPCORDER:var4 BPPTCOMA:var5 {:RESULT=Ejes;
                                                                                           ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                           ListaTokens.add(var3); ListaTokens.add(var4);
                                                                                           ListaTokens.add(var5);:};

contenidox::=
            contenidox BPCADENA:var1 {:Ejes.add(var1);:}
            |contenidox IDENTIFICADOR:var1 {:Ejes.add(var1);:}
            |contenidox BPCOMA:var1 {:ListaTokens.add(var1);:}
            |BPCADENA:var1 {:Ejes.add(var1);:}
            |IDENTIFICADOR:var1 {:Ejes.add(var1);:}
;

valores::=BPVALORES:var1 BPDOSPUNTOS:var2 BPCORIZQ:var3 contenidov BPCORDER:var4 BPPTCOMA:var5 {:RESULT=valores;
                                                                                                ListaTokens.add(var1); ListaTokens.add(var2);
                                                                                                ListaTokens.add(var3); ListaTokens.add(var4);
                                                                                                ListaTokens.add(var5);:};

contenidov::=
            contenidov DD:var1 {:valores.add((String) var1);:}
            |contenidov IDENTIFICADOR:var1 {:valores.add( var1);:}
            |contenidov BPCOMA:var1 {:ListaTokens.add(var1);:}
            |DD:var1 {:valores.add((String) var1);:}
            |IDENTIFICADOR:var1 {:valores.add( var1);:}
;

titulox::=BPTTX:var2 BPDOSPUNTOS:var3 IDENTIFICADOR:var1 BPPTCOMA:var4 {:RESULT=var1; ListaTokens.add(var2); ListaTokens.add(var3);
                                                                        ListaTokens.add(var4);:}
         |BPTTX:var2 BPDOSPUNTOS:var3 BPCADENA:var1 BPPTCOMA:var4 {:RESULT=var1; ListaTokens.add(var2); ListaTokens.add(var3); 
                                                                    ListaTokens.add(var4);:}
;

tituloy::=BPTTY:var2 BPDOSPUNTOS:var3 IDENTIFICADOR:var1 BPPTCOMA:var4 {:RESULT=var1; ListaTokens.add(var2); ListaTokens.add(var3); 
                                                                        ListaTokens.add(var4);:}
         |BPTTY:var2 BPDOSPUNTOS:var3 BPCADENA:var1 BPPTCOMA:var4 {:RESULT=var1; ListaTokens.add(var2); ListaTokens.add(var3); 
                                                                    ListaTokens.add(var4);:}
;

Arch::=BPARCHIVO:var2 BPDOSPUNTOS:var3 IDENTIFICADOR:var1 BPPTCOMA:var4 {:RESULT=var1; ListaTokens.add(var2); ListaTokens.add(var3); 
                                                                         ListaTokens.add(var4);:}
      |BPARCHIVO:var2 BPDOSPUNTOS:var3 BPCADENA:var1 BPPTCOMA:var4 {:RESULT=var1; ListaTokens.add(var2); ListaTokens.add(var3); 
                                                                     ListaTokens.add(var4);:}
;

compara::=BPCOMPARE:var3 BPPAA:var4 BPCADENA:var1 BPCOMA:var5 BPCADENA:var2 BPPAC:var6 BPPTCOMA:var7 {:Direcciones.add(var1); Direcciones.add(var2);
                                                                                                        ListaTokens.add(var3); ListaTokens.add(var4); 
                                                                                                        ListaTokens.add(var5); ListaTokens.add(var6);
                                                                                                        ListaTokens.add(var7);:}
         |BPCOMPARE:var3 BPPAA:var4 BPRUTA:var1 BPCOMA:var5 BPRUTA:var2 BPPAC:var6 BPPTCOMA:var7 {:Direcciones.add(var1); Direcciones.add(var2);
                                                                                                        ListaTokens.add(var3); ListaTokens.add(var4); 
                                                                                                        ListaTokens.add(var5); ListaTokens.add(var6);
                                                                                                        ListaTokens.add(var7);:};